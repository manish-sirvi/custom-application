"use strict";(self.webpackChunkcustom_app=self.webpackChunkcustom_app||[]).push([[3696],{"./src/components/channel-details/index.js":(e,n,o)=>{o.r(n),o.d(n,{default:()=>$});var t=o("./node_modules/@babel/runtime-corejs3/helpers/esm/asyncToGenerator.js"),s=o("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/values.js"),l=o.n(s),a=o("./node_modules/@babel/runtime-corejs3/regenerator/index.js"),r=o.n(a),i=o("./node_modules/react-intl/lib/src/components/useIntl.js"),c=o("./node_modules/react-router/esm/react-router.js"),d=o("./node_modules/@commercetools-frontend/application-components/dist/commercetools-frontend-application-components.esm.js"),m=o("./node_modules/@commercetools-uikit/notifications/dist/commercetools-uikit-notifications.esm.js"),u=o("./node_modules/@commercetools-uikit/text/dist/commercetools-uikit-text.esm.js"),h=o("./node_modules/@commercetools-uikit/spacings/dist/commercetools-uikit-spacings.esm.js"),p=o("./node_modules/@commercetools-uikit/loading-spinner/dist/commercetools-uikit-loading-spinner.esm.js"),f=o("./node_modules/react/index.js"),b=o("./node_modules/@commercetools-frontend/application-shell-connectors/dist/commercetools-frontend-application-shell-connectors.esm.js"),k=o("./node_modules/@commercetools-frontend/l10n/dist/commercetools-frontend-l10n.esm.js"),y=o("./node_modules/@commercetools-frontend/constants/dist/commercetools-frontend-constants.esm.js"),g=o("./node_modules/@commercetools-frontend/permissions/dist/commercetools-frontend-permissions.esm.js"),j=o("./node_modules/@commercetools-frontend/actions-global/dist/commercetools-frontend-actions-global.esm.js"),v=o("./src/constants.js"),_=o("./src/hooks/use-channels-connector/index.js"),C=o("./node_modules/@commercetools-uikit/localized-text-input/dist/commercetools-uikit-localized-text-input.esm.js"),x=function docToFormValues(e,n){var o,t,s;return{key:null!==(o=null===e||void 0===e?void 0:e.key)&&void 0!==o?o:"",roles:null!==(t=null===e||void 0===e?void 0:e.roles)&&void 0!==t?t:[],name:C.Z.createLocalizedString(n,(0,k.sM)(null!==(s=null===e||void 0===e?void 0:e.nameAllLocales)&&void 0!==s?s:[]))}},D=function formValuesToDoc(e){return{key:e.key,roles:e.roles,nameAllLocales:(0,k.UK)(C.Z.omitEmptyTranslations(e.name))}},E=o("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js"),L=o.n(E),Z=o("./node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js"),M=o.n(Z),B=o("./node_modules/formik/dist/formik.esm.js"),S=o("./node_modules/@commercetools-uikit/localized-text-field/dist/commercetools-uikit-localized-text-field.esm.js"),O=o("./node_modules/@commercetools-uikit/text-field/dist/commercetools-uikit-text-field.esm.js"),R=o("./node_modules/@commercetools-uikit/select-field/dist/commercetools-uikit-select-field.esm.js"),w={inventorySupply:"InventorySupply",productDistribution:"ProductDistribution",orderExport:"OrderExport",orderImport:"OrderImport",primary:"Primary"},F=o("./node_modules/@babel/runtime-corejs3/core-js-stable/array/is-array.js"),I=o.n(F),T=o("./node_modules/@commercetools-uikit/text-input/dist/commercetools-uikit-text-input.esm.js"),z=o("./node_modules/omit-empty-es/dist/omit-empty-es.esm.js");const P=function validate(e){var n={key:{},roles:{}};return T.Z.isEmpty(e.key)&&(n.key.missing=!0),I()(e.roles)&&0===e.roles.length&&(n.roles.missing=!0),(0,z.Z)(n)};const K=(0,o("./node_modules/react-intl/lib/index.js").vU)({backToChannelsList:{id:"ChannelDetails.backToChannelsList",defaultMessage:"Back to channels list"},duplicateKey:{id:"ChannelDetails.duplicateKey",defaultMessage:"A channel with this key already exists."},channelUpdated:{id:"ChannelDetails.channelUpdated",defaultMessage:"Channel {channelName} updated"},channelKeyLabel:{id:"ChannelDetails.channelKeyLabel",defaultMessage:"Channel key"},channelNameLabel:{id:"ChannelDetails.channelNameLabel",defaultMessage:"Channel name"},channelRolesLabel:{id:"ChannelDetails.channelRolesLabel",defaultMessage:"Channel roles"},hint:{id:"ChannelDetails.hint",defaultMessage:"This page demonstrates for instance how to use forms, notifications and how to update data using GraphQL, etc."},modalTitle:{id:"ChannelDetails.modalTitle",defaultMessage:"Edit channel"},channelDetailsErrorMessage:{id:"ChannelDetails.errorMessage",defaultMessage:"We were unable to fetch the channel details. Please check your connection, the provided channel ID and try again."}});var N,U=o("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),V=L()(N=M()(w)).call(N,(function(e){return{label:w[e],value:w[e]}})),A=function ChannelDetailsForm(e){var n=(0,i.Z)(),o=(0,B.TA)({initialValues:e.initialValues,onSubmit:e.onSubmit,validate:P,enableReinitialize:!0}),t=(0,U.BX)(h.Z.Stack,{scale:"l",children:[(0,U.tZ)(O.Z,{name:"key",title:n.formatMessage(K.channelKeyLabel),value:l()(o).key,errors:o.errors.key,touched:o.touched.key,onChange:o.handleChange,onBlur:o.handleBlur,isReadOnly:e.isReadOnly,renderError:function renderError(e){return"duplicate"===e?n.formatMessage(K.duplicateKey):null},isRequired:!0,horizontalConstraint:13}),(0,U.tZ)(S.Z,{name:"name",title:n.formatMessage(K.channelNameLabel),value:l()(o).name,errors:o.errors.name,touched:Boolean(o.touched.name),onChange:o.handleChange,onBlur:o.handleBlur,selectedLanguage:e.dataLocale,isReadOnly:e.isReadOnly,horizontalConstraint:13}),(0,U.tZ)(R.Z,{name:"roles",title:n.formatMessage(K.channelRolesLabel),value:l()(o).roles,errors:o.errors.roles,touched:o.touched.roles,onChange:o.handleChange,onBlur:o.handleBlur,isMulti:!0,options:V,isReadOnly:e.isReadOnly,isRequired:!0,horizontalConstraint:13})]});return e.children({formElements:t,values:l()(o),isDirty:o.dirty,isSubmitting:o.isSubmitting,submitForm:o.handleSubmit,resetForm:o.resetForm})};A.displayName="ChannelDetailsForm";const W=A;var q=o("./node_modules/@babel/runtime-corejs3/core-js-stable/instance/reduce.js"),G=o.n(q),X=function transformErrors(e){var n=I()(e)?e:[e],o=G()(n).call(n,(function(e,n){var o,t,s,l,a=null!==(o=null===n||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.code)&&void 0!==o?o:n.code,r=null!==(s=null===n||void 0===n||null===(l=n.extensions)||void 0===l?void 0:l.field)&&void 0!==s?s:n.field;return"DuplicateField"===a?e.formErrors[r]={duplicate:!0}:e.unmappedErrors.push(n),e}),{formErrors:{},unmappedErrors:[]}),t=o.formErrors,s=o.unmappedErrors;return{formErrors:(0,z.Z)(t),unmappedErrors:s}},Q=function ChannelDetails(e){var n=(0,i.Z)(),o=(0,c.UO)(),s=(0,_.wP)(o.id),a=s.loading,C=s.error,E=s.channel,L=(0,b.UV)((function(e){return{dataLocale:e.dataLocale,projectLanguages:e.project.languages}})),Z=L.dataLocale,M=L.projectLanguages,B=(0,g.bk)({demandedPermissions:[v._.Manage]}),S=(0,j.E0)(),O=(0,j._F)(),R=(0,_.EE)(),w=(0,f.useCallback)(function(){var e=(0,t.Z)(r().mark((function _callee(e,o){var t,s;return r().wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:return t=D(e),l.prev=1,l.next=4,R.execute({originalDraft:E,nextDraft:t});case 4:S({kind:"success",domain:y.w7.SIDE,text:n.formatMessage(K.channelUpdated,{channelName:(0,k.Wb)(e,{key:"name",locale:Z,fallbackOrder:M})})}),l.next=12;break;case 7:l.prev=7,l.t0=l.catch(1),(s=X(l.t0)).unmappedErrors.length>0&&O({errors:s.unmappedErrors}),o.setErrors(s.formErrors);case 12:case"end":return l.stop()}}),_callee,null,[[1,7]])})));return function(n,o){return e.apply(this,arguments)}}(),[E,R,Z,n,M,O,S]);return(0,U.tZ)(W,{initialValues:x(E,M),onSubmit:w,isReadOnly:!B,dataLocale:Z,children:function children(o){var t;return(0,U.BX)(d.ck,{title:(0,k.Wb)({name:null===(t=l()(o))||void 0===t?void 0:t.name},{key:"name",locale:Z,fallbackOrder:M,fallback:y.xL}),isOpen:!0,onClose:e.onClose,isPrimaryButtonDisabled:o.isSubmitting||!o.isDirty||!B,isSecondaryButtonDisabled:!o.isDirty,onSecondaryButtonClick:o.resetForm,onPrimaryButtonClick:o.submitForm,labelPrimaryButton:d.ck.Intl.save,labelSecondaryButton:d.ck.Intl.revert,children:[a&&(0,U.tZ)(h.Z.Stack,{alignItems:"center",children:(0,U.tZ)(p.Z,{})}),C&&(0,U.tZ)(m.I,{type:"error",children:(0,U.tZ)(u.Z.Body,{children:n.formatMessage(K.channelDetailsErrorMessage)})}),E&&o.formElements,null===E&&(0,U.tZ)(d.uW,{})]})}})};Q.displayName="ChannelDetails";const $=Q}}]);
//# sourceMappingURL=3696.3696.ee0ddf31540bdcf976c4.js.map